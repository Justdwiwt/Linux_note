# Linux

- [ ] shell

## 常见的shell命令

### 管道命令

利用Linux所提供的管道符`|`将两个命令隔开，管道符左边命令的输出就会作为管道符右边命令的输入。
连续使用管道意味着第一个命令的输出会作为第二个命令的输入，第二个命令的输出又会作为第三个命令的输入，依此类推。

### find命令

> `find [path...] [-option] 参数`

在一个目录（及子目录）中搜索文件，可以指定一些匹配条件，如按文件名、文件类型、用户甚至是时间戳查找文件。

| 选项    | 参数                         |
| :------ | :--------------------------- |
| print   | 将匹配的文件输出到标准输出   |
| size    | 匹配文件大小                 |
| name    | 按照文件名查找文件           |
| perm    | 按照文件权限来查找文件       |
| user    | 按照文件所有者来查找文件     |
| group   | 按照文件所属的组来查找文件   |
| mtime   | 按照文件的更改时间来查找文件 |
| nogroup | 查找无有效所属组的文件       |
| type    | 查找某一类型的文件           |
| size n  | 查找文件长度为n块的文件      |
| &nbsp;  | 带有c时表示文件长度以字节计  |

### sed命令

非交互式文本处理工具，一般在`shell`脚本中使用。
默认情况下，所有的输出行都被打印到屏幕上。

* `sed`把当前正在处理的行保存在一个临时缓冲区中（也称为模式空间）。
* 然后处理临时缓冲区中的行，完成后把该行发送到屏幕上。
* `sed`每处理完一行就将其从临时缓冲区删除，然后将下一行读入，进行处理和显示。
* 处理完输入文件的最后一行后，`sed`便结束运行。
* `sed`把每一行都存在临时缓冲区中，对这个副本进行编辑，所以不会修改原文件。

| 选项        | 参数                                  |
| :---------- | :------------------------------------ |
| h或-help    | 显示帮助                              |
| n           | 仅显示script处理后的结果              |
| V或-version | 显示版本信息                          |
| e           | 允许对输入数据应用多条sed命令进行编辑 |
| f           | 直接将sed的动作写在一个文件内         |

### grep命令

> `grep [OPTIONS] PATTERN [FILE...]`

一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。

| 选项   | 参数                                   |
| :----- | :------------------------------------- |
| -n     | 同时显示匹配行上下的n行                |
| -b     | 打印匹配行前面打印该行所在的块号码     |
| -c     | 只打印匹配的行数，不显示匹配的内容     |
| -f     | 从文件中提取模板                       |
| &nbsp; | 空文件包含0个模板，所以什么都不匹配    |
| -h     | 当搜索多个文件时，不显示匹配文件名前缀 |
| -i     | 忽略大小写差别                         |
| -q     | 取消显示，只返回退出状态               |
| &nbsp; | 0表示找到了匹配的行                    |
| -n     | 在匹配的行前面打印行号                 |
| -v     | 反检索，只显示不匹配的行               |

### tail命令

> `tail [-F] [-c Number | -n Number | -m Number | -b Number | -k Number ] [ File ]`

把某个档案文件的最后几行显示到终端上，如果该文件有更新，`tail`会自动刷新，确保你看到最新的文件内容。

| 选项      | 参数                                    |
| :-------- | :-------------------------------------- |
| -F        | 用于监视file文件增长                    |
| -c Number | 从Number字节位置读取指定文件            |
| -n Number | 从Number行位置读取指定文件              |
| -m Number | 从Number字符位置读取指定文件            |
| &nbsp;    | 如果指定-c参数可能导致截断              |
| &nbsp;    | 如果使用-m会避免该问题                  |
| -b Number | 从Number表示的512字节块位置读取指定文件 |
| -k Number | 从Number表示的1kb块位置读取指定文件     |

### sort命令

| 选项 | 参数           |
| :--- | :------------- |
| -u   | 不出现重复的行 |
| -t   | 指定分段的符号 |
| -k   | 指定的第几个段 |
| -r   | 逆向排序       |

### cut命令

> `cut [-option] filename`

`cut`命令在文件中负责剪切数据

| 选项 | 参数               |
| :--- | :----------------- |
| -b   | 字节               |
| -c   | 字符               |
| -f   | 提取第几列         |
| -d   | 按指定分隔符分隔列 |

### history命令

显示全部历史

## shell脚本高级

### shell script

* 命令的执行是从上而下、从左而右执行
* 命令、选项与参数间的多个空格会被忽略
* 空白行也被忽略掉,`tab`被视为空格
* 如果读取一个`Enter`符号（CR）,就尝试开始执行该行命令
* `#`后面内容为注释

#### 执行方式

1. 直接执行
    * `shell.sh`文件必须具备可读与可执行(`rx`)的权限
    * 绝对路径：运行`/home/shell.sh`来执行指令
    * 相对路径：`cd`到`/home/`,使用`./shell.sh`执行
2. `source`执行
    * `source shell.sh`
3. `bash`执行
    * `bash shell.sh`  
    * `sh shell.sh`

#### test判断命令

| 选项 | 参数                                     |
| :--- | :--------------------------------------- |
| -e   | 该文件是否存在                           |
| -f   | 该文件名是否存在且为文件`file`           |
| -d   | 该文件名是否存在且为目录`directory`      |
| -b   | 该文件是否存在且为一个`block device`     |
| -c   | 该文件是否存在且为一个`character device` |
| -S   | 该文件是否存在且为一个`socket`文件       |
| -p   | 该文件是否存在且为一个`FIFO`文件         |
| -l   | 该文件是否存在且为一个链接文件           |
| -r   | 检查该文件是否存在且具有可读的权限       |
| -w   | 检查该文件是否存在具有可写的权限         |
| -x   | 检查该文件是否存在且具有可执行的权限     |
| -s   | 检查该文件是否存在且具有`SUID`的属性     |
| -g   | 检查该文件名是否存在且具有`SGID`的属性   |
| -z   | 判断字符串是否为空，若空为`true`         |
| -n   | 判断字符串是否非空，若空为`false`        |
| -nt  | 判断`file1`是否比`file2`新               |
| -ot  | 判断`file1`是否比`file2`旧               |
| -ef  | 判断两个文件是否为同一个文件             |
